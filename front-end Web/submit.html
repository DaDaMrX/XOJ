<html>
<script>
  var oj = localStorage.oj;
  var id = localStorage.id;
  var title = localStorage.title;
</script>

<head>
  <title id="ti">
    {{title+"-"+oj+"-"+id}}
  </title>
  <!--<link rel="stylesheet" href="./xoj.css" type="text/css">-->
  <link rel="icon" href="logo.ico" type="logo-icon" />
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>

<body>
  <div id="app">
    <el-menu class="el-menu-demo" mode="horizontal" background-color="#545c64" text-color="#fff" active-text-color="#ffd04b">
      <el-menu-item index="3">
        <a href="./lisit.html" target="_blank">HOME</a>
      </el-menu-item>
      <el-menu-item index="3">
        <a href="./submit.html" target="_blank">SUBMIT</a>
      </el-menu-item>
      <el-menu-item index="3">
        <a href="./problem.html" target="_blank">PROBLEM</a>
      </el-menu-item>
      <el-menu-item index="3">
        <a href="./status.html" target="_blank">STATUS</a>
      </el-menu-item>
    </el-menu>

    <center>
      <h2>{{oj+" "+id+"."+title}}</h2>
      <h3>Compiler:</h3>
      <el-select size="small" placeholder="g++">
        <el-option v-for="item in options" :key="item.value" :label="item.label">
        </el-option>
      </el-select>
    </center>
    <center>
      <textarea id="code" style="width:500px;height:500px;"></textarea>
      <div>
        <el-button type=submit @click.native="submit">提交</el-button>
      </div>
    </center>
  </div>
</body>

<!-- 先引入 Vue -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

<script>
  new Vue({
    el: '#app',
    data: function () {
      return {
        options: [{
          value: 'option 1',
          label: 'g++'
        }],
        "id": id,
        "oj": oj,
        "title": title,
        value: ''
      }
    },
    methods: {
      submit() {
        var code = document.getElementById("code").value;
        console.log(code);
        var xmlhttp;
        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp = new XMLHttpRequest();
        }
        else {// code for IE6, IE5
          xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            //document.getElementById("test").innerHTML=responseText;
            //obj = JSON.parse(xmlhttp.responseText);
            //console.log(obj.list[1].OJ);
            window.location.href = "./status.html"
          }
        }
        xmlhttp.open("POST", "./status.html?oj="+oj+"&pid="+id, true);
        xmlhttp.send(code);
      }
    }
  }),
    new Vue({
      el: '#ti',
      data: {
        "id": id,
        "oj": oj,
        "title": title,
      }
    })
</script>

</html>