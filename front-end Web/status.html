<html>
<script type="text/javascript">
    var obj = {};
    function init() {
        //console.log("a");
        var xmlhttp;
        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                //document.getElementById("test").innerHTML=responseText;
                obj = JSON.parse(xmlhttp.responseText);
                //console.log(obj.statusData[1].OJ);
            }
        }
        xmlhttp.open("GET", "./status.json", true);
        xmlhttp.send();
    }
    window.onload = init();
  //console.log(obj.Title);
  //console.log(obj.OJ + "123");
</script>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>评测状态-XOJ</title>
    <!--<link rel="stylesheet" href="./xoj.css" type="text/css">-->
    <link rel="icon" href="logo.ico" type="logo-icon" />
    <!-- 引入element样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <style>
        div {
            border-radius: 5px 5px 0 0;
        }
    </style>
</head>

<body background="round.png">
    <div id="app">
        <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" background-color="#545c64" text-color="#fff"
            active-text-color="#ffd04b">
            <el-menu-item index="1">
                <a href="./lisit.html" target="_blank">HOME</a>
            </el-menu-item>
            <el-menu-item index="2">
                <a href="./submit.html" target="_blank">SUBMIT</a>
            </el-menu-item>
            <el-menu-item index="3">
                <a href="./problem.html" target="_blank">PROBLEM</a>
            </el-menu-item>
            <el-menu-item index="4">
                <a href="./status.html" target="_blank">STATUS</a>
            </el-menu-item>
        </el-menu>
    </div>
    <div id="main">
        <div class="rich_text round_0123">
            <center>
                <div class="center">
                    <h2>Status</h2>
                </div>
                <div id="table">
                    <el-table :data="statusData" border style="width: 100%" @cell-click="click">
                        <el-table-column prop="OJ" label="OJ" width="150">
                        </el-table-column>
                        <el-table-column prop="ID" label="ID" width="100">
                        </el-table-column>
                        <el-table-column prop="Title" label="Title" width="200">
                        </el-table-column>
                        <el-table-column prop="Submit time" label="Submit time" width="200">
                        </el-table-column>
                        <el-table-column prop="length" label="length" width="200">
                        </el-table-column>
                        <el-table-column prop="Run time" label="Run time" width="200">
                        </el-table-column>
                        <el-table-column prop="Status" label="Status" width="298">
                        </el-table-column>
                    </el-table>
                </div>
        </div>
    </div>
</body>


<!-- 引入vue -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- 引入element JS -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

<script>
    new Vue({
        el: '#app',
        data: function () {
            return {
                activeIndex: '4'
            };
        }
    })
</script>

<script>
    new Vue({
        el: '#table',
        data: function () {
            return obj
        },
        methods: {
            click(row, column, cell, event) {
                var pre_text = cell.innerHTML;
                var txt = pre_text.substring(18, pre_text.length - 6);
                var id = row.ID;
                var title = row.title;
                var oj = row.OJ;
                if (txt === oj) {
                    //如果点击了OJ列，跳转至对应的OJ首页
                    var oj_list = {
                        "POJ": "http://poj.org/",
                        "HDU": "http://acm.hdu.edu.cn/"
                    }
                    switch (oj) {
                        case "POJ": {
                            window.location.href = oj_list.POJ;
                            break;
                        }
                        case "HDU": {
                            window.location.href = oj_list.HDU;
                            break;
                        }
                    }

                } else {
                    //如果点击了Title或者ID列，跳转进入problem.html
                    //turn(oj, id);
                    var xmlhttp;
                    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                        xmlhttp = new XMLHttpRequest();
                    }
                    else {// code for IE6, IE5
                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp.onreadystatechange = function () {
                        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                            //document.getElementById("test").innerHTML=responseText;
                            //obj = JSON.parse(xmlhttp.responseText);
                            //console.log(obj.list[1].OJ);
                            window.location.href = './problem.html';
                            console.log(oj + " " + id + " " + row.Title);
                        }
                    }
                    xmlhttp.open("GET", "./problem.html?oj="+oj+"&pid="+id, true);
                    xmlhttp.send();
                }
                console.log(oj + " " + id + " " + row.Title);
                //console.log(txt);
                //console.log(row.ID);
                //console.log(column.label);
            }
        }
    })
</script>

</html>